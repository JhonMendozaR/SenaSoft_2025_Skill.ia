# ğŸš€ GuÃ­a de Despliegue en Render - Skill.IA Frontend

Esta guÃ­a te muestra cÃ³mo desplegar el frontend de Skill.IA en Render.

## ğŸ“‹ Requisitos Previos

1. **Cuenta en Render**: Crea una cuenta gratuita en [render.com](https://render.com)
2. **Repositorio Git**: Tu cÃ³digo debe estar en GitHub, GitLab o Bitbucket
3. **Groq API Key**: ObtÃ©n tu clave en [console.groq.com/keys](https://console.groq.com/keys)

---

## ğŸ¯ MÃ©todo 1: Despliegue AutomÃ¡tico con Blueprint (Recomendado)

El archivo `render.yaml` en la raÃ­z del proyecto configura todo automÃ¡ticamente.

### Pasos:

1. **Inicia sesiÃ³n en Render**
   - Ve a [dashboard.render.com](https://dashboard.render.com)

2. **Crea un nuevo Blueprint**
   - Click en **"New +"** â†’ **"Blueprint"**
   - Selecciona tu repositorio: `JhonMendozaR/SenaSoft_2025_Skill.ia`
   - Render detectarÃ¡ automÃ¡ticamente el `render.yaml`

3. **Configura las Variables de Entorno**
   - En el dashboard, ve a tu servicio `skillai-frontend`
   - Click en **"Environment"** en el menÃº lateral
   - Agrega la variable:
     ```
     PUBLIC_GROQ_API_KEY = tu_clave_de_groq_aqui
     ```
   - Click en **"Save Changes"**

4. **Deplegar**
   - Render construirÃ¡ automÃ¡ticamente tu aplicaciÃ³n
   - El proceso toma ~3-5 minutos
   - Una vez completado, recibirÃ¡s una URL: `https://skillai-frontend.onrender.com`

---

## ğŸ”§ MÃ©todo 2: Despliegue Manual

Si prefieres configurar manualmente:

### Paso 1: Crear Servicio

1. **En el Dashboard de Render**
   - Click en **"New +"** â†’ **"Static Site"**

2. **Conectar Repositorio**
   - Selecciona tu repositorio Git
   - Dale permisos a Render

### Paso 2: Configurar Build

```yaml
Name: skillia-frontend
Root Directory: web
Build Command: npm install && npm run build
Publish Directory: web/dist
```

### Paso 3: ConfiguraciÃ³n Avanzada

**Auto-Deploy**: âœ… Activado (depliegue automÃ¡tico en cada push)

**Branch**: `main` (o `deploy` si usas esa rama)

### Paso 4: Variables de Entorno

En **Environment Variables**, agrega:

| Key | Value |
|-----|-------|
| `PUBLIC_GROQ_API_KEY` | `gsk_tu_clave_aqui` |
| `NODE_VERSION` | `22.20.0` |

### Paso 5: Desplegar

- Click en **"Create Static Site"**
- Render empezarÃ¡ a construir tu aplicaciÃ³n

---

## ğŸŒ ConfiguraciÃ³n Post-Despliegue

### 1. Actualizar URL del Sitio

Una vez que tengas tu URL de Render, actualiza `astro.config.mjs`:

```javascript
export default defineConfig({
  site: 'https://tu-app.onrender.com',  // â† Actualizar con tu URL real
  // ...resto de la configuraciÃ³n
});
```

Luego haz commit y push:

```bash
git add web/astro.config.mjs
git commit -m "chore: update site URL for production"
git push origin main
```

### 2. Configurar Dominio Personalizado (Opcional)

Si tienes un dominio propio:

1. En el Dashboard de Render â†’ **Settings** â†’ **Custom Domains**
2. Click en **"Add Custom Domain"**
3. Ingresa tu dominio: `skillai.tudominio.com`
4. Sigue las instrucciones para configurar DNS

---

## ğŸ” Verificar el Despliegue

### 1. Verificar que la App Carga

Visita tu URL de Render y verifica:
- âœ… La pÃ¡gina principal carga
- âœ… Puedes navegar a `/login`, `/diagnostic`, `/roadmap`, `/chat`
- âœ… Los estilos se ven correctos

### 2. Verificar Groq API

1. Abre la consola del navegador (F12)
2. Ve a la pÃ¡gina `/diagnostic`
3. Inicia una evaluaciÃ³n
4. En la consola deberÃ­as ver:
   ```
   âœ… Groq client initialized successfully
   ğŸ¤– Generating question...
   âœ… Question generated by Groq
   ```

Si ves `âš ï¸ Groq API key not found`, revisa las variables de entorno.

---

## ğŸš¨ SoluciÃ³n de Problemas

### Problema: Build falla con "Command not found"

**SoluciÃ³n**: Verifica que el Root Directory estÃ© configurado como `web`

```yaml
Root Directory: web
Build Command: npm install && npm run build
```

### Problema: "PUBLIC_GROQ_API_KEY is not defined"

**SoluciÃ³n**: 
1. Ve a Dashboard â†’ Environment
2. AsegÃºrate de que la variable tenga el prefijo `PUBLIC_`
3. Guarda cambios y redeploy manualmente

### Problema: PÃ¡ginas muestran 404

**SoluciÃ³n**: AsegÃºrate de que `Publish Directory` sea `web/dist`

### Problema: Assets no cargan (CSS/JS)

**SoluciÃ³n**: Verifica la configuraciÃ³n en `astro.config.mjs`:

```javascript
build: {
  assets: '_astro',
  format: 'directory'
}
```

### Problema: Build toma demasiado tiempo

**SoluciÃ³n**: Render free tier puede ser lento. Considera:
- Usar caching de npm en Render
- Optimizar dependencias

---

## ğŸ”„ Actualizar el Despliegue

### Despliegue AutomÃ¡tico

Si configuraste Auto-Deploy:

```bash
# Haz tus cambios
git add .
git commit -m "feat: nueva funcionalidad"
git push origin main
```

Render detectarÃ¡ el push y re-desplegarÃ¡ automÃ¡ticamente.

### Despliegue Manual

En el Dashboard de Render:
1. Ve a tu servicio
2. Click en **"Manual Deploy"** â†’ **"Deploy latest commit"**

---

## ğŸ“Š Monitoreo

### Logs

Para ver logs en tiempo real:
1. Dashboard â†’ Tu servicio
2. Click en **"Logs"**
3. VerÃ¡s el output del build y cualquier error

### MÃ©tricas

Render muestra:
- Tiempo de build
- TamaÃ±o del deploy
- TrÃ¡fico de red
- Uptime

---

## ğŸ” Seguridad

### Variables de Entorno Sensibles

- âœ… **SÃ** agregues: `PUBLIC_GROQ_API_KEY`
- âŒ **NO** hagas commit de archivos `.env` con claves reales
- âŒ **NO** expongas claves en el cÃ³digo fuente

### Headers de Seguridad

Ya estÃ¡n configurados en `render.yaml`:
- `X-Frame-Options: DENY` (previene clickjacking)
- `X-Content-Type-Options: nosniff` (previene MIME sniffing)
- `Referrer-Policy: strict-origin-when-cross-origin`

---

## ğŸ’° Costos

### Plan Free

- âœ… **GRATIS** para sitios estÃ¡ticos
- âœ… 100 GB de ancho de banda/mes
- âœ… SSL automÃ¡tico
- âœ… CDN global
- âš ï¸ Puede tener tiempos de build mÃ¡s lentos

### Plan Starter ($7/mes)

- âš¡ Builds mÃ¡s rÃ¡pidos
- ğŸ“Š MÃ¡s ancho de banda
- ğŸ¯ Soporte prioritario

---

## ğŸ“ Recursos Adicionales

- [DocumentaciÃ³n de Render](https://render.com/docs/static-sites)
- [DocumentaciÃ³n de Astro](https://docs.astro.build/en/guides/deploy/render/)
- [Groq API Docs](https://console.groq.com/docs)

---

## ğŸ“ Contacto y Soporte

Si tienes problemas con el despliegue:

1. **Revisa los logs** en el Dashboard de Render
2. **Consulta esta guÃ­a** de nuevo
3. **Contacta al equipo** (ver README principal)

---

## âœ… Checklist de Despliegue

Antes de desplegar, verifica:

- [ ] El cÃ³digo estÃ¡ en el repositorio Git
- [ ] Tienes tu Groq API Key
- [ ] Has configurado `render.yaml` (si usas Blueprint)
- [ ] El `.node-version` estÃ¡ presente en `/web`
- [ ] Los archivos `.env` NO estÃ¡n en Git (verificar `.gitignore`)
- [ ] Has probado el build localmente: `npm run build`

Una vez desplegado:

- [ ] La URL de producciÃ³n funciona
- [ ] Todas las pÃ¡ginas cargan correctamente
- [ ] Groq API funciona (verifica en `/diagnostic`)
- [ ] Los estilos se ven correctos
- [ ] La navegaciÃ³n funciona
- [ ] Has actualizado la URL en `astro.config.mjs` si es necesario

---

**Â¡Listo para producciÃ³n! ğŸš€**

# Configuraci√≥n de Groq para Skill.IA

## ‚úÖ Estado: IMPLEMENTADO Y FUNCIONANDO

La integraci√≥n con Groq est√° **completa y operativa**. Las preguntas se generan din√°micamente usando el modelo `llama-3.3-70b-versatile`.

---

## Paso 1: Obtener tu API Key

1. Ve a [Groq Console](https://console.groq.com/keys)
2. Inicia sesi√≥n o crea una cuenta
3. Crea una nueva API key
4. Copia la clave generada

## Paso 2: Configurar el proyecto

1. En el directorio `/web`, crea un archivo `.env`:

```bash
cp .env.example .env
```

2. Edita el archivo `.env` y pega tu API key:

```env
PUBLIC_GROQ_API_KEY=gsk_tu_clave_aqui
```

**‚ö†Ô∏è IMPORTANTE**: En Astro, las variables de entorno que quieres usar en el navegador **DEBEN** tener el prefijo `PUBLIC_`. Sin este prefijo, la variable NO estar√° disponible en el cliente.

## Paso 3: Ejecutar el proyecto

```bash
cd web
npm run dev
```

El servidor se iniciar√° (probablemente en http://localhost:4321 o http://localhost:4322)

## Paso 4: Verificar funcionamiento

**Opci√≥n A - Test r√°pido con script:**
```bash
cd web
node test-groq.js
```

Deber√≠as ver:
```
‚úÖ Pregunta generada exitosamente:
Texto: [pregunta generada por IA]
‚ú® ¬°Todo funciona correctamente!
```

**Opci√≥n B - Test en el navegador:**

1. Abre http://localhost:4321/diagnostic (o el puerto que muestre tu terminal)
2. **Abre la consola del navegador** (F12 ‚Üí Console)
3. Haz clic en "Comenzar Evaluaci√≥n"
4. **Observa los logs en la consola:**
   ```
   ‚úÖ Groq client initialized successfully
   ü§ñ Generating question... {hasGroqClient: true, questionNumber: 1}
   üì° Calling Groq API...
   üì§ Sending prompt to Groq...
   üì• Groq response received
   ‚ú® Question validated successfully
   ‚úÖ Question generated by Groq: [texto √∫nico de la pregunta]
   ```
5. **Las preguntas ser√°n diferentes cada vez** - generadas din√°micamente por Groq
6. **Contin√∫a respondiendo** - cada nueva pregunta se genera al avanzar

## Verificar que funciona

1. Abre http://localhost:4321/diagnostic
2. **Abre la consola del navegador** (F12 ‚Üí Console)
3. Haz clic en "Comenzar Evaluaci√≥n"
4. Deber√≠as ver en la consola:
   - `‚úÖ Groq client initialized successfully`
   - `ü§ñ Generating question...`
   - `üì° Calling Groq API...`
   - `‚úÖ Question generated by Groq: [texto de la pregunta]`
5. Las preguntas deber√≠an generarse din√°micamente con contenido √∫nico
6. Si ves `‚ö†Ô∏è Using mock question generation`, revisa tu API key

## Notas importantes

- ‚úÖ **Groq est√° integrado**: Las preguntas se generan con IA en tiempo real
- ‚úÖ **Fallback incluido**: Si Groq no est√° disponible, usa preguntas de ejemplo
- ‚úÖ **Modelo usado**: `llama-3.1-70b-versatile` (r√°pido y eficiente)
- ‚úÖ **Sin guardar datos**: Solo genera preguntas, no persiste informaci√≥n

## Soluci√≥n de problemas

### "‚ö†Ô∏è Groq API key not found"
- Verifica que tu API key est√© en el archivo `.env` en la ra√≠z de `/web/`
- Aseg√∫rate de usar el prefijo `PUBLIC_GROQ_API_KEY` (no `GROQ_API_KEY`)
- **Reinicia el servidor** despu√©s de modificar el `.env`: det√©n con Ctrl+C y ejecuta `npm run dev` de nuevo

### Las preguntas siguen siendo gen√©ricas (mock)
- Abre la consola del navegador (F12)
- Si ves "‚ö†Ô∏è Groq client not available", la API key no se carg√≥ correctamente
- Verifica que reiniciaste el servidor despu√©s de crear/modificar `.env`
- Revisa que la API key sea v√°lida en https://console.groq.com/keys

### "‚ùå Groq client initialization failed"
- Puede ser un problema con el SDK de Groq
- Verifica que `groq-sdk` est√© instalado: `npm list groq-sdk`
- Si no est√°, instala con: `npm install groq-sdk`

### Error CORS
- Groq SDK est√° configurado con `dangerouslyAllowBrowser: true` para funcionar en el navegador
- Esto es seguro solo para desarrollo/demo. En producci√≥n, considera usar un proxy backend.
